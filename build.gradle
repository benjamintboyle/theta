apply plugin: 'application'
apply plugin: 'java'
apply plugin: 'eclipse'

mainClassName = "theta.ThetaEngine"

group = 'theta'
// Removed (possibly temporarily) so distribution isn't always changing filename
// version = '0.2'

// Dependency versions
ext.slf4jVersion         = '1.+'
ext.log4jVersion         = '2.+'
ext.rxJavaVersion        = '2.+'

// Test dependency versions
ext.hamcrestVersion      = '2.+'
ext.mockitoVersion       = '2.+'
ext.junitJupiterVersion  = '5.+'
ext.junitPlatformVersion  ='1.+'

repositories {
    mavenCentral()
}

sourceCompatibility = 9
targetCompatibility = 9

dependencies {
    // Production code dependencies
    implementation("org.slf4j:slf4j-api:${slf4jVersion}")
    implementation("org.apache.logging.log4j:log4j-api:${log4jVersion}")
    implementation("org.apache.logging.log4j:log4j-core:${log4jVersion}")
    implementation("org.apache.logging.log4j:log4j-slf4j-impl:${log4jVersion}")
    implementation("io.reactivex.rxjava2:rxjava:${rxJavaVersion}")

    implementation files('libs/interactive-brokers-api-9.72.18.jar')

    // Test code dependencies
    testImplementation("org.hamcrest:java-hamcrest:${hamcrestVersion}")
    testImplementation("org.mockito:mockito-core:${mockitoVersion}")
    testImplementation("org.mockito:mockito-junit-jupiter:${mockitoVersion}")

    // Junit 5
    testImplementation("org.junit.jupiter:junit-jupiter-api:${junitJupiterVersion}")
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:${junitJupiterVersion}")
    testRuntimeOnly("org.junit.platform:junit-platform-launcher:${junitPlatformVersion}")
}

test {
	useJUnitPlatform()

	testLogging {
		events "passed", "skipped", "failed"
	}

	reports {
		html.enabled = true
	}
}

distZip {
    enabled = false
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.8'
}
